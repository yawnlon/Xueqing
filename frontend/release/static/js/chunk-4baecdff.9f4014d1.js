(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4baecdff"],{"0280":function(e,t,o){"use strict";var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-footer",{staticClass:"footer-container",attrs:{id:"app-footer"}},[o("span",{staticStyle:{"font-family":"'ArialMT', 'Arial'","text-decoration":"none"}},[e._v("Copyright © ")]),e._v(" "),o("span",{staticStyle:{"font-family":"'PingFangSC-Regular', 'PingFang SC'","text-decoration":"none"}},[e._v("好学知")]),e._v(" "),o("span",{staticStyle:{"font-family":"'ArialMT', 'Arial'","text-decoration":"none"}},[e._v(", All Rights Reserved.")])])},n=[],r={name:"AppFooter",data:function(){return{}}},a=r,i=(o("9af8"),o("2877")),c=Object(i["a"])(a,s,n,!1,null,null,null);t["a"]=c.exports},2359:function(e,t,o){"use strict";var s=o("5940"),n=o.n(s);n.a},"2e20":function(e,t,o){e.exports=o.p+"static/img/logo-part3.78f834eb.png"},5940:function(e,t,o){},"83e1":function(e,t,o){"use strict";var s=o("d213"),n=o.n(s);n.a},8686:function(e,t,o){e.exports=o.p+"static/img/bg-01.38a48e01.png"},"87de":function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"signup-container",style:{backgroundImage:"url("+e.bg_img+")"}},[o("el-form",{ref:"signupForm",staticClass:"signup-form",attrs:{model:e.signupForm,rules:e.signupRules,autocomplete:"on","label-position":"left"}},[o("img",{staticClass:"logo-img",attrs:{src:e.logo_img}}),e._v(" "),o("el-form-item",{attrs:{prop:"username"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"user"}})],1),e._v(" "),o("el-input",{ref:"username",attrs:{placeholder:"请输入姓名",name:"username",type:"text",tabindex:"1",autocomplete:"off"},model:{value:e.signupForm.username,callback:function(t){e.$set(e.signupForm,"username",t)},expression:"signupForm.username"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"phonenumber"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"user"}})],1),e._v(" "),o("el-input",{ref:"phonenumber",attrs:{placeholder:"请输入手机号码",name:"phonenumber",type:"text",tabindex:"2",autocomplete:"off"},model:{value:e.signupForm.phonenumber,callback:function(t){e.$set(e.signupForm,"phonenumber",t)},expression:"signupForm.phonenumber"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"valicode"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"user"}})],1),e._v(" "),o("el-input",{ref:"valicode",attrs:{placeholder:"请输入短信验证码",name:"valicode",type:"text",tabindex:"3",autocomplete:"off"},model:{value:e.signupForm.valicode,callback:function(t){e.$set(e.signupForm,"valicode",t)},expression:"signupForm.valicode"}}),e._v(" "),o("el-button",{staticClass:"show-pwd",staticStyle:{"font-size":"0.8em"},attrs:{type:"text",disabled:e.codeDisabled},nativeOn:{click:function(t){return t.preventDefault(),e.sendCode(e.signupForm.phonenumber)}}},[e._v("\n        "+e._s(e.codeMsg)+"\n      ")])],1),e._v(" "),o("el-tooltip",{attrs:{content:"Caps lock is On",placement:"right",manual:""},model:{value:e.capsTooltip,callback:function(t){e.capsTooltip=t},expression:"capsTooltip"}},[o("el-form-item",{attrs:{prop:"password"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"password"}})],1),e._v(" "),o("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"设置6至20位登录密码",name:"password",tabindex:"4",autocomplete:"on"},on:{blur:function(t){e.capsTooltip=!1}},nativeOn:{keyup:[function(t){return e.checkCapslock(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSignup(t)}]},model:{value:e.signupForm.password,callback:function(t){e.$set(e.signupForm,"password",t)},expression:"signupForm.password"}}),e._v(" "),o("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[o("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1)],1),e._v(" "),o("el-tooltip",{attrs:{content:"Caps lock is On",placement:"right",manual:""},model:{value:e.capsTooltip,callback:function(t){e.capsTooltip=t},expression:"capsTooltip"}},[o("el-form-item",{attrs:{prop:"cpassword"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"password"}})],1),e._v(" "),o("el-input",{key:e.passwordType,ref:"cpassword",attrs:{type:e.passwordType,placeholder:"请再次输入登录密码",name:"cpassword",tabindex:"5",autocomplete:"on"},on:{blur:function(t){e.capsTooltip=!1}},nativeOn:{keyup:[function(t){return e.checkCapslock(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSignup(t)}]},model:{value:e.signupForm.cpassword,callback:function(t){e.$set(e.signupForm,"cpassword",t)},expression:"signupForm.cpassword"}}),e._v(" "),o("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[o("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1)],1),e._v(" "),o("el-checkbox",{staticStyle:{color:"#999999"},model:{value:e.signupForm.checked,callback:function(t){e.$set(e.signupForm,"checked",t)},expression:"signupForm.checked"}},[e._v("勾选同意\n      "),o("router-link",{attrs:{to:"/agree",target:"_blank"}},[o("span",{staticStyle:{color:"#666666"}},[e._v("《用户服务协议》")])])],1),e._v(" "),o("el-button",{staticClass:"btn",attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleSignup("signupForm")}}},[e._v("注册")]),e._v(" "),o("div",{staticClass:"login-container"},[o("p",[o("router-link",{attrs:{to:"/login"}},[o("span",[e._v("已有账号，立即登录")])])],1)])],1),e._v(" "),o("app-footer")],1)},n=[],r=(o("ac6a"),o("456d"),o("bc3a")),a=o.n(r),i=o("5c96"),c=o("0280"),p={name:"Signup",components:{"app-footer":c["a"]},data:function(){var e=this,t=function(t,o,s){o+="",""===o?s(new Error("请输入密码")):o.length<6||o.length>20?s(new Error("密码为6-20位字符")):(""!==e.signupForm.cpassword&&e.$refs.signupForm.validateField("cpassword"),s())},s=function(t,o,s){o+="",""===o?s(new Error("请再次输入密码")):o!==e.signupForm.password?s(new Error("两次输入密码不一致!")):s()};return{signupForm:{checked:!1},signupRules:{phonenumber:[{required:!0,trigger:"blur",message:"请输入手机号码"},{pattern:/^((1[3,5,8][0-9])|(14[5,7])|(17[0,5,6,7,8])|(19[7]))\d{8}$/,message:"请检查手机号是否正确",trigger:"blur"}],username:[{required:!0,trigger:"blur",message:"请输入姓名"}],password:[{required:!0,trigger:"blur",validator:t}],cpassword:[{required:!0,trigger:"blur",validator:s}],valicode:[{required:!0,trigger:"blur",message:"请输入短信验证码"},{len:6,message:"短信验证码为6位数字",trigger:"blur"}]},passwordType:"password",capsTooltip:!1,loading:!1,showDialog:!1,redirect:void 0,otherQuery:{},logo_img:o("2e20"),bg_img:o("8686"),codeDisabled:!1,countdown:60,codeMsg:"发送验证码",timer:null}},watch:{$route:{handler:function(e){var t=e.query;t&&(this.redirect=t.redirect,this.otherQuery=this.getOtherQuery(t))},immediate:!0}},created:function(){},mounted:function(){},destroyed:function(){},methods:{checkCapslock:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shiftKey,o=e.key;o&&1===o.length&&(this.capsTooltip=!!(t&&o>="a"&&o<="z"||!t&&o>="A"&&o<="Z")),"CapsLock"===o&&!0===this.capsTooltip&&(this.capsTooltip=!1)},showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick(function(){e.$refs.password.focus()})},sendCode:function(e){var t=this;this.$refs.signupForm.validateField("phonenumber",function(e){console.log("".concat(e,"***************************")),e||t.timer||a.a.post("/api/v1/sms/send",{mobile:t.signupForm.phonenumber,check_mobile_exist:!1,template:"SMS_167655084"}).then(function(e){console.log(e),t.codeDisabled=!0,t.timer=setInterval(function(){t.countdown>0&&t.countdown<=60&&(t.countdown--,0!==t.countdown?t.codeMsg="重新发送("+t.countdown+")":(clearInterval(t.timer),t.codeMsg="重发验证码",t.countdown=60,t.timer=null,t.codeDisabled=!1))},1e3)}).catch(function(e){Object(i["Message"])({message:e.response.data.detail,type:"error",duration:5e3})})})},handleSignup:function(e){var t=this;this.$refs[e].validate(function(e){return t.signupForm.checked?e?void a.a.post("/api/v1/account/register",{name:t.signupForm.username,mobile:t.signupForm.phonenumber,code:t.signupForm.valicode,password:t.signupForm.password}).then(function(e){console.log(e),t.loading=!1,t.$router.push({path:"/success",query:{tip:"恭喜您注册成功"}})}).catch(function(e){Object(i["Message"])({message:e.response.data.detail,type:"error",duration:5e3})}):(console.log("error submit!!"),!1):(Object(i["Message"])({message:"注册请同意《用户服务协议》",type:"error",duration:5e3}),!1)})},getOtherQuery:function(e){return Object.keys(e).reduce(function(t,o){return"redirect"!==o&&(t[o]=e[o]),t},{})}}},l=p,u=(o("2359"),o("83e1"),o("2877")),d=Object(u["a"])(l,s,n,!1,null,"77d236dc",null);t["default"]=d.exports},"9af8":function(e,t,o){"use strict";var s=o("e9b4"),n=o.n(s);n.a},d213:function(e,t,o){},e9b4:function(e,t,o){}}]);