(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-af1fefa4"],{2359:function(e,s,t){"use strict";var o=t("5940"),n=t.n(o);n.a},"2e20":function(e,s,t){e.exports=t.p+"static/img/logo-part3.78f834eb.png"},5940:function(e,s,t){},"803d":function(e,s,t){"use strict";var o=t("fda3"),n=t.n(o);n.a},"87de":function(e,s,t){"use strict";t.r(s);var o=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"signup-container"},[t("el-form",{ref:"signupForm",staticClass:"signup-form",attrs:{model:e.signupForm,rules:e.signupRules,autocomplete:"on","label-position":"left"}},[t("img",{staticClass:"logo-img",attrs:{src:e.logo_img}}),e._v(" "),t("el-form-item",{attrs:{prop:"username"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"user"}})],1),e._v(" "),t("el-input",{ref:"username",attrs:{placeholder:"请输入姓名",name:"username",type:"text",tabindex:"1",autocomplete:"off"},model:{value:e.signupForm.username,callback:function(s){e.$set(e.signupForm,"username",s)},expression:"signupForm.username"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"phonenumber"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"user"}})],1),e._v(" "),t("el-input",{ref:"phonenumber",attrs:{placeholder:"请输入手机号码",name:"phonenumber",type:"text",tabindex:"2",autocomplete:"off"},model:{value:e.signupForm.phonenumber,callback:function(s){e.$set(e.signupForm,"phonenumber",s)},expression:"signupForm.phonenumber"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"valicode"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"user"}})],1),e._v(" "),t("el-input",{ref:"valicode",attrs:{placeholder:"请输入短信验证码",name:"valicode",type:"text",tabindex:"3",autocomplete:"off"},model:{value:e.signupForm.valicode,callback:function(s){e.$set(e.signupForm,"valicode",s)},expression:"signupForm.valicode"}}),e._v(" "),t("el-button",{staticClass:"show-pwd",staticStyle:{"font-size":"0.8em"},attrs:{type:"text",disabled:e.codeDisabled},nativeOn:{click:function(s){return s.preventDefault(),e.sendCode(s)}}},[e._v("\n        "+e._s(e.codeMsg)+"\n      ")])],1),e._v(" "),t("el-tooltip",{attrs:{content:"Caps lock is On",placement:"right",manual:""},model:{value:e.capsTooltip,callback:function(s){e.capsTooltip=s},expression:"capsTooltip"}},[t("el-form-item",{attrs:{prop:"password1"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"password"}})],1),e._v(" "),t("el-input",{key:e.passwordType,ref:"password1",attrs:{type:e.passwordType,placeholder:"设置6至20位登录密码",name:"password1",tabindex:"4",autocomplete:"on"},on:{blur:function(s){e.capsTooltip=!1}},nativeOn:{keyup:[function(s){return e.checkCapslock(s)},function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.handleSignup(s)}]},model:{value:e.signupForm.password1,callback:function(s){e.$set(e.signupForm,"password1",s)},expression:"signupForm.password1"}}),e._v(" "),t("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[t("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1)],1),e._v(" "),t("el-tooltip",{attrs:{content:"Caps lock is On",placement:"right",manual:""},model:{value:e.capsTooltip,callback:function(s){e.capsTooltip=s},expression:"capsTooltip"}},[t("el-form-item",{attrs:{prop:"password2"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"password"}})],1),e._v(" "),t("el-input",{key:e.passwordType,ref:"password2",attrs:{type:e.passwordType,placeholder:"请再次输入登录密码",name:"password2",tabindex:"5",autocomplete:"on"},on:{blur:function(s){e.capsTooltip=!1}},nativeOn:{keyup:[function(s){return e.checkCapslock(s)},function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.handleSignup(s)}]},model:{value:e.signupForm.password2,callback:function(s){e.$set(e.signupForm,"password2",s)},expression:"signupForm.password2"}}),e._v(" "),t("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[t("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1)],1),e._v(" "),t("el-checkbox",{staticStyle:{color:"#999999"},model:{value:e.signupForm.checked,callback:function(s){e.$set(e.signupForm,"checked",s)},expression:"signupForm.checked"}},[e._v("勾选同意\n      "),t("router-link",{attrs:{to:"/signup/agreement"}},[t("span",{staticStyle:{color:"#666666"}},[e._v("《用户服务协议》")])])],1),e._v(" "),t("el-button",{staticStyle:{width:"100%","margin-bottom":"10px","margin-top":"10px"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(s){return s.preventDefault(),e.handleSignup(s)}}},[e._v("注册")]),e._v(" "),t("div",{staticClass:"login-container"},[t("p",[t("router-link",{attrs:{to:"/login"}},[t("span",[e._v("已有账号，立即登录")])])],1)])],1)],1)},n=[],r=(t("ac6a"),t("456d"),t("61f7")),i=t("bc3a"),a=t.n(i),c=t("5c96"),p={name:"Signup",data:function(){var e=this,s=function(e,s,t){Object(r["f"])(s)?t():t(new Error("请输入正确的用户名"))},o=function(e,s,t){s.length<6?t(new Error("密码不能少于6位")):t()},n=function(e,s,t){11!==s.length?t(new Error("手机号错误")):t()},i=function(s,t,o){""===t?o(new Error("请再次输入密码")):t!==e.ruleForm2.pass?o(new Error("两次输入密码不一致!")):o()};return{signupForm:{checked:!1},signupRules:{phonenumber:[{required:!0,trigger:"blur",validator:n}],username:[{required:!0,trigger:"blur",validator:s}],password1:[{required:!0,trigger:"blur",validator:o}],password2:[{required:!0,trigger:"blur",validator:i}],valicode:[{required:!0,trigger:"blur",validator:o}]},passwordType:"password",capsTooltip:!1,loading:!1,showDialog:!1,redirect:void 0,otherQuery:{},logo_img:t("2e20"),codeDisabled:!1,countdown:60,codeMsg:"发送验证码",timer:null}},watch:{$route:{handler:function(e){var s=e.query;s&&(this.redirect=s.redirect,this.otherQuery=this.getOtherQuery(s))},immediate:!0}},created:function(){},mounted:function(){""===this.signupForm.username?this.$refs.username.focus():""===this.signupForm.phonenumber?this.$refs.phonenumber.focus():""===this.signupForm.valicode?this.$refs.valicode.focus():""===this.signupForm.password1?this.$refs.password1.focus():""===this.signupForm.password2?this.$refs.password2.focus():this.signupForm.checked||this.$refs.checked.focus()},destroyed:function(){},methods:{checkCapslock:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=e.shiftKey,t=e.key;t&&1===t.length&&(this.capsTooltip=!!(s&&t>="a"&&t<="z"||!s&&t>="A"&&t<="Z")),"CapsLock"===t&&!0===this.capsTooltip&&(this.capsTooltip=!1)},showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick(function(){e.$refs.password.focus()})},sendCode:function(){var e=this;if(!this.signupForm.phonenumber)return this.$refs["signupForm"].fields[1].validateMessage="请输入手机号",void(this.$refs["signupForm"].fields[1].validateState="error");this.timer||(this.codeDisabled=!0,this.timer=setInterval(function(){e.countdown>0&&e.countdown<=60&&(e.countdown--,0!==e.countdown?e.codeMsg="重新发送("+e.countdown+")":(clearInterval(e.timer),e.codeMsg="重发验证码",e.countdown=60,e.timer=null,e.codeDisabled=!1))},1e3),a.a.post("/api/sms/send",{mobile:this.signupForm.phonenumber,check_mobile_exist:!1,template:"SMS_167655084"}).then(function(e){return console.log(e)}).catch(function(e){Object(c["Message"])({message:e.response.data.detail,type:"error",duration:5e3})}))},handleSignup:function(){var e=this;this.signupForm.checked?this.signupForm.password1===this.signupForm.password2?a.a.post("/api/account/register",{name:this.signupForm.username,mobile:this.signupForm.phonenumber,code:this.signupForm.valicode,password:this.signupForm.password1}).then(function(s){console.log(s),e.loading=!1,e.$router.push({path:"/success",query:{tip:"恭喜您注册成功"}})}).catch(function(e){Object(c["Message"])({message:e.response.data.detail,type:"error",duration:5e3})}):Object(c["Message"])({message:"两次输入密码不一致",type:"error",duration:5e3}):Object(c["Message"])({message:"注册请同意《用户服务协议》",type:"error",duration:5e3})},getOtherQuery:function(e){return Object.keys(e).reduce(function(s,t){return"redirect"!==t&&(s[t]=e[t]),s},{})}}},u=p,l=(t("2359"),t("803d"),t("2877")),d=Object(l["a"])(u,o,n,!1,null,"6aeedb1a",null);s["default"]=d.exports},fda3:function(e,s,t){}}]);